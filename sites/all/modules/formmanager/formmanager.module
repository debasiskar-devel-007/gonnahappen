<?php

function formmanager_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == 'user_login' )
    {


        $form['name']['#attributes']['class'][] = 'form-control';
        $form['name']['#attributes']['placeholder'] = 'User Name';
        $form['pass']['#attributes']['class'][] = 'form-control';
        $form['pass']['#attributes']['placeholder'] = 'Password';
        $form['actions']['submit']['#attributes']['class'][] = 'btn btn-primary btn-block btn-flat';
        //$form['submit']['#value'] = 'btn';
        $form['actions']['submit']['#value'] = 'Sign In';
        if(isset($_COOKIE['usernameval'])) $form['name']['#value'] = @$_COOKIE['usernameval'];
        //$form['submit']['#suffix'] = '<p>Some text to place after the submit button</p>';
        $form['submit']['#suffix'] = '


                <div>';

        $form['submit']['#preffix'] ='</div>
            </div> <div class="clearfix"></div>';
        $options = array();
        $options[1] = "Yes";
        $options[0] = "No";

        $form ['rememberme'] = array(
            '#type' => 'checkbox',
            '#title' => t('rememberme'),
            '#default_value' => 0,
            /*'#value'=>5,*/
            '#options' => $options,
            //'#access' => !empty($account->picture->fid),
            '#description' => t('Check this box to delete your current picture.'),
        );

        $form['#validate'][] = 'loginformvalidate';
           // ini_set('session.cookie_lifetime', 0);
           /* foreach ($_COOKIE as $key => $value) {
                setcookie($key, $value, 0);
            }
            setcookie('_fnet_keepLogged', 0, time()+200000);
        }else{
            ini_set('session.cookie_lifetime', 2000000);
            setcookie('_fnet_keepLogged', 1, time()+200000);
        }*/
//exit;
        $form['#action']= $GLOBALS['base_url'].'/user/login?destination=dashboard';

    }
    //echo current_path();exit;
if($form_id == 'banner_form' ){

  $cur_path=current_path();
    if(current_path()=='admin/content/banner/add' || strpos($cur_path,'admin/content/banner/manage') !== false ) {
        $form['banner_image']['#access'] = FALSE;
        $form['banner_image_url']['#access'] = FALSE;
    }
   else{
      // echo current_path();exit;
       //$ar=arg();
      // if($ar[0]=='banner') {

           $form['banner_name']['#access'] = FALSE;
           $form['banner_help_text']['#access'] = FALSE;
           $form['banner_status']['#access'] = FALSE;
           $form['banner_upload_time']['#access'] = FALSE;
           $heading = t("Add Banner Image");
           $form['banner_name'] = array(
               '#prefix' => '<div class="headingtext"><span>' . $heading . '</span></div>',
               /*'#attributes'=>array('class'=>'form-control')*/
           );
      // }

    }
}

    if($form_id == 'eventlist_form' ) {
        if(strpos(current_path(),'eventlist/gallery/add') !== false ) {

            $form['eventlist_name']['#access'] = FALSE;
            $form['eventlist_details']['#access'] = FALSE;
            $form['eventlist_category']['#access'] = FALSE;
            $form['eventlist_banner']['#access'] = FALSE;
            $form['eventlist_location']['#access'] = FALSE;
            $form['eventlist_email']['#access'] = FALSE;
            $form['eventlist_phone']['#access'] = FALSE;
            $form['eventlist_website']['#access'] = FALSE;
            $form['eventlist_image']['#access'] = FALSE;
            $form['eventlist_status']['#access'] = FALSE;
            $form['search_tag']['#access'] = FALSE;
            $form['eventlist_created_by']['#access'] = FALSE;
            $form['eventlist_created_time']['#access'] = FALSE;
            $form['eventlist_datetime']['#access'] = FALSE;
            $form['eventlist_artist']['#access'] = FALSE;
            $form['eventlist_video']['#access'] = FALSE;
            $heading = t("Add Event Gallery Image");


            $form['eventlist_gallery'] = array(
                '#title' => t('Event Gallery Image'),
                '#type' => 'managed_file',
                '#name' => 'eventlist_gallery',
                '#multiple'=>true,
                '#default_value' => '',
                '#description' => t(''),
                '#upload_validators' => array(
                    'file_validate_extensions' => array('gif png jpg jpeg'),
                    // Pass the maximum file size in bytes
                    'file_validate_size' => array(MAX_FILE_SIZE*1024*1024),
                ),
                '#upload_location' => 'public://eventlist/gallery',
                '#process' => array('formmanager_eventlist_gallery_element_process'),


            );

            $form['actions'] = array(
                '#type' => 'actions',
                'submit' => array(
                    '#type' => 'submit',
                    '#value' => t('Add Image'),
                ),
                );
        }
    }
        if($form_id == 'user_pass')
    {
        $form['name']['#attributes']['class'][] = 'form-control';
        $form['name']['#attributes']['placeholder'] = 'Enter Your Email or User Name';
        $form['pass']['#attributes']['class'][] = 'form-control';

        $form['actions']['submit']['#attributes']['class'][] = 'btn btn-primary btn-block btn-flat';
        //$form['submit']['#value'] = 'btn';
        $form['actions']['submit']['#value'] = 'Sign In';
        //$form['submit']['#suffix'] = '<p>Some text to place after the submit button</p>';
        $form['submit']['#suffix'] = '


                </div> <div class="clearfix"> <div class="col-xs-12 forgot_xs12">';

        $form['submit']['#preffix'] ='</div>
            </div> <div class="clearfix"></div>';



    }


}


function loginformvalidate($form, &$form_state){
    //echo 456;

    //var_dump($form_state['values']['rememberme']);
    if ($form_state['values']['rememberme'] == 1) {
       //echo $form_state['values']['name'];
        setcookie("usernameval",$form_state['values']['name'], time() + 2592000, '/');
    }
    else{


        unset($_COOKIE["usernameval"]);

    }
}

function formmanager_eventlist_gallery_element_process($element, &$form_state, $form){
    $element = file_managed_file_process($element, $form_state, $form);
    $element['upload_button']['#access'] = FALSE;
    return $element;
}